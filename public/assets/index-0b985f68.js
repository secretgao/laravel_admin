import{o as _t,a as fe,i as mt,w as ne,b as oe,n as _e,c as Pe,u as G,r as x,d as Y,g as vt,e as se,f as me,h as n,j as gt,m as De,k as yt,T as Fe,l as ze,v as Re,p as ht,q as wt,F as U,s as Ue,t as Me,x as Te,y as Ne,z as P,A as y,B,C as _,D as S,E as D,G as j,H as u,I as T,J,K as We,L as ce,M as bt,N as At,O as Q,P as Ce,Q as xt,R as Ct}from"./index-43d93b12.js";const Z=e=>e!=null,de=e=>typeof e=="function",ve=e=>e!==null&&typeof e=="object",Et=e=>ve(e)&&de(e.then)&&de(e.catch),Qe=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),kt=()=>Bt?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function Lt(){}const ge=Object.assign,Bt=typeof window<"u";function Ee(e,t){const a=t.split(".");let d=e;return a.forEach(p=>{var h;d=ve(d)&&(h=d[p])!=null?h:""}),d}const je=null,q=[Number,String],V={type:Boolean,default:!0},X=e=>({type:String,default:e});var ye=typeof window<"u";function Ge(e){let t;oe(()=>{e(),_e(()=>{t=!0})}),Pe(()=>{t&&e()})}function Ke(e,t,a={}){if(!ye)return;const{target:d=window,passive:p=!1,capture:h=!1}=a;let s=!1,m;const i=b=>{if(s)return;const $=G(b);$&&!m&&($.addEventListener(e,t,{capture:h,passive:p}),m=!0)},C=b=>{if(s)return;const $=G(b);$&&m&&($.removeEventListener(e,t,h),m=!1)};_t(()=>C(d)),fe(()=>C(d)),Ge(()=>i(d));let k;return mt(d)&&(k=ne(d,(b,$)=>{C($),i(b)})),()=>{k==null||k(),C(d),s=!0}}var ie,ue;function It(){if(!ie&&(ie=x(0),ue=x(0),ye)){const e=()=>{ie.value=window.innerWidth,ue.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:ie,height:ue}}var $t=/scroll|auto|overlay/i,Ot=ye?window:void 0;function St(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function Pt(e,t=Ot){let a=e;for(;a&&a!==t&&St(a);){const{overflowY:d}=window.getComputedStyle(a);if($t.test(d))return a;a=a.parentNode}return t}kt();const Dt=e=>e.stopPropagation();function Ye(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Dt(e)}It();function H(e){if(Z(e))return Qe(e)?`${e}px`:String(e)}function Ft(e){const t={};return e!==void 0&&(t.zIndex=+e),t}const zt=/-(\w)/g,qe=e=>e.replace(zt,(t,a)=>a.toUpperCase()),{hasOwnProperty:Rt}=Object.prototype;function Ut(e,t,a){const d=t[a];Z(d)&&(!Rt.call(e,a)||!ve(d)?e[a]=d:e[a]=He(Object(e[a]),d))}function He(e,t){return Object.keys(t).forEach(a=>{Ut(e,t,a)}),e}var Mt={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const ke=x("zh-CN"),Le=Y({"zh-CN":Mt}),Tt={messages(){return Le[ke.value]},use(e,t){ke.value=e,this.add({[e]:t})},add(e={}){He(Le,e)}};var Nt=Tt;function Wt(e){const t=qe(e)+".";return(a,...d)=>{const p=Nt.messages(),h=Ee(p,t+a)||Ee(p,a);return de(h)?h(...d):h}}function pe(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((a,d)=>a+pe(e,d),""):Object.keys(t).reduce((a,d)=>a+(t[d]?pe(e,d):""),""):""}function Qt(e){return(t,a)=>(t&&typeof t!="string"&&(a=t,t=""),t=t?`${e}__${t}`:e,`${t}${pe(t,a)}`)}function ae(e){const t=`van-${e}`;return[t,Qt(t),Wt(t)]}const jt="van-haptics-feedback",Be=5;function Gt(e,{args:t=[],done:a,canceled:d}){if(e){const p=e.apply(null,t);Et(p)?p.then(h=>{h?a():d&&d()}).catch(Lt):p?a():d&&d()}else a()}function re(e){return e.install=t=>{const{name:a}=e;a&&(t.component(a,e),t.component(qe(`-${a}`),e))},e}const Kt=Symbol();function Yt(e){const t=vt();t&&ge(t.proxy,e)}const[qt,Ie]=ae("badge"),Ht={dot:Boolean,max:q,tag:X("div"),color:String,offset:Array,content:q,showZero:V,position:X("top-right")};var Jt=se({name:qt,props:Ht,setup(e,{slots:t}){const a=()=>{if(t.content)return!0;const{content:m,showZero:i}=e;return Z(m)&&m!==""&&(i||m!==0&&m!=="0")},d=()=>{const{dot:m,max:i,content:C}=e;if(!m&&a())return t.content?t.content():Z(i)&&Qe(C)&&+C>+i?`${i}+`:C},p=m=>m.startsWith("-")?m.replace("-",""):`-${m}`,h=me(()=>{const m={background:e.color};if(e.offset){const[i,C]=e.offset,{position:k}=e,[b,$]=k.split("-");t.default?(typeof C=="number"?m[b]=H(b==="top"?C:-C):m[b]=b==="top"?H(C):p(C),typeof i=="number"?m[$]=H($==="left"?i:-i):m[$]=$==="left"?H(i):p(i)):(m.marginTop=H(C),m.marginLeft=H(i))}return m}),s=()=>{if(a()||e.dot)return n("div",{class:Ie([e.position,{dot:e.dot,fixed:!!t.default}]),style:h.value},[d()])};return()=>{if(t.default){const{tag:m}=e;return n(m,{class:Ie("wrapper")},{default:()=>[t.default(),s()]})}return s()}}});const Vt=re(Jt);let Xt=2e3;const Zt=()=>++Xt,[en,ko]=ae("config-provider"),tn=Symbol(en),[nn,$e]=ae("icon"),on=e=>e==null?void 0:e.includes("/"),an={dot:Boolean,tag:X("i"),name:String,size:q,badge:q,color:String,badgeProps:Object,classPrefix:String};var ln=se({name:nn,props:an,setup(e,{slots:t}){const a=gt(tn,null),d=me(()=>e.classPrefix||(a==null?void 0:a.iconPrefix)||$e());return()=>{const{tag:p,dot:h,name:s,size:m,badge:i,color:C}=e,k=on(s);return n(Vt,De({dot:h,tag:p,class:[d.value,k?"":`${d.value}-${s}`],style:{color:C,fontSize:H(m)},content:i},e.badgeProps),{default:()=>{var b;return[(b=t.default)==null?void 0:b.call(t),k&&n("img",{class:$e("image"),src:s},null)]}})}}});const sn=re(ln),rn={show:Boolean,zIndex:q,overlay:V,duration:q,teleport:[String,Object],lockScroll:V,lazyRender:V,beforeClose:Function,overlayStyle:Object,overlayClass:je,transitionAppear:Boolean,closeOnClickOverlay:V};function un(e,t){return e>t?"horizontal":t>e?"vertical":""}function cn(){const e=x(0),t=x(0),a=x(0),d=x(0),p=x(0),h=x(0),s=x(""),m=x(!0),i=()=>s.value==="vertical",C=()=>s.value==="horizontal",k=()=>{a.value=0,d.value=0,p.value=0,h.value=0,s.value="",m.value=!0};return{move:v=>{const l=v.touches[0];a.value=(l.clientX<0?0:l.clientX)-e.value,d.value=l.clientY-t.value,p.value=Math.abs(a.value),h.value=Math.abs(d.value);const N=10;(!s.value||p.value<N&&h.value<N)&&(s.value=un(p.value,h.value)),m.value&&(p.value>Be||h.value>Be)&&(m.value=!1)},start:v=>{k(),e.value=v.touches[0].clientX,t.value=v.touches[0].clientY},reset:k,startX:e,startY:t,deltaX:a,deltaY:d,offsetX:p,offsetY:h,direction:s,isVertical:i,isHorizontal:C,isTap:m}}let te=0;const Oe="van-overflow-hidden";function dn(e,t){const a=cn(),d="01",p="10",h=k=>{a.move(k);const b=a.deltaY.value>0?p:d,$=Pt(k.target,e.value),{scrollHeight:v,offsetHeight:l,scrollTop:N}=$;let M="11";N===0?M=l>=v?"00":"01":N+l>=v&&(M="10"),M!=="11"&&a.isVertical()&&!(parseInt(M,2)&parseInt(b,2))&&Ye(k,!0)},s=()=>{document.addEventListener("touchstart",a.start),document.addEventListener("touchmove",h,{passive:!1}),te||document.body.classList.add(Oe),te++},m=()=>{te&&(document.removeEventListener("touchstart",a.start),document.removeEventListener("touchmove",h),te--,te||document.body.classList.remove(Oe))},i=()=>t()&&s(),C=()=>t()&&m();Ge(i),fe(C),yt(C),ne(t,k=>{k?s():m()})}function Je(e){const t=x(!1);return ne(e,a=>{a&&(t.value=a)},{immediate:!0}),a=>()=>t.value?a():null}const[pn,fn]=ae("overlay"),_n={show:Boolean,zIndex:q,duration:q,className:je,lockScroll:V,lazyRender:V,customStyle:Object};var mn=se({name:pn,props:_n,setup(e,{slots:t}){const a=x(),d=Je(()=>e.show||!e.lazyRender),p=s=>{e.lockScroll&&Ye(s,!0)},h=d(()=>{var s;const m=ge(Ft(e.zIndex),e.customStyle);return Z(e.duration)&&(m.animationDuration=`${e.duration}s`),ze(n("div",{ref:a,style:m,class:[fn(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[Re,e.show]])});return Ke("touchmove",p,{target:a}),()=>n(Fe,{name:"van-fade",appear:!0},{default:h})}});const vn=re(mn),gn=ge({},rn,{round:Boolean,position:X("center"),closeIcon:X("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:X("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[yn,Se]=ae("popup");var hn=se({name:yn,inheritAttrs:!1,props:gn,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:a,slots:d}){let p,h;const s=x(),m=x(),i=Je(()=>e.show||!e.lazyRender),C=me(()=>{const L={zIndex:s.value};if(Z(e.duration)){const z=e.position==="center"?"animationDuration":"transitionDuration";L[z]=`${e.duration}s`}return L}),k=()=>{p||(p=!0,s.value=e.zIndex!==void 0?+e.zIndex:Zt(),t("open"))},b=()=>{p&&Gt(e.beforeClose,{done(){p=!1,t("close"),t("update:show",!1)}})},$=L=>{t("clickOverlay",L),e.closeOnClickOverlay&&b()},v=()=>{if(e.overlay)return n(vn,{show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:$},{default:d["overlay-content"]})},l=L=>{t("clickCloseIcon",L),b()},N=()=>{if(e.closeable)return n(sn,{role:"button",tabindex:0,name:e.closeIcon,class:[Se("close-icon",e.closeIconPosition),jt],classPrefix:e.iconPrefix,onClick:l},null)};let M;const ee=()=>{M&&clearTimeout(M),M=setTimeout(()=>{t("opened")})},I=()=>t("closed"),g=L=>t("keydown",L),O=i(()=>{var L;const{round:z,position:E,safeAreaInsetTop:K,safeAreaInsetBottom:le}=e;return ze(n("div",De({ref:m,style:C.value,role:"dialog",tabindex:0,class:[Se({round:z,[E]:E}),{"van-safe-area-top":K,"van-safe-area-bottom":le}],onKeydown:g},a),[(L=d.default)==null?void 0:L.call(d),N()]),[[Re,e.show]])}),F=()=>{const{position:L,transition:z,transitionAppear:E}=e,K=L==="center"?"van-fade":`van-popup-slide-${L}`;return n(Fe,{name:z||K,appear:E,onAfterEnter:ee,onAfterLeave:I},{default:O})};return ne(()=>e.show,L=>{L&&!p&&(k(),a.tabindex===0&&_e(()=>{var z;(z=m.value)==null||z.focus()})),!L&&p&&(p=!1,t("close"))}),Yt({popupRef:m}),dn(m,()=>e.show&&e.lockScroll),Ke("popstate",()=>{e.closeOnPopstate&&(b(),h=!1)}),oe(()=>{e.show&&k()}),Pe(()=>{h&&(t("update:show",!0),h=!1)}),fe(()=>{e.show&&e.teleport&&(b(),h=!0)}),ht(Kt,()=>e.show),()=>e.teleport?n(wt,{to:e.teleport},{default:()=>[v(),F()]}):n(U,null,[v(),F()])}});const wn=re(hn);const Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAWtJREFUWEftlkFuwkAMRWcigXqJIpZwioaTQU9GbgFLBJdAVMSVI1KFaGx/O0hsyioSM+Pn72/P5PTmX35z/OQGOCw/6tS2dSb66uBzriml7+67qpr16dp4koIBOHC+37ccUAvAMOvzbYdCQACHxXyXU9qih/I6FMQEiATvQamqNlZJTIDjYk6ezMdrV+ebGkP9c0r2fyBEzerys5GSUAG07FlePpQltkA1FUSAzvVtuy+Rl2rrXd+fKwMIztfcffyc7Uttqu15KYBYCsUHIoCUTVIOkwBiCigekEwlmfblAGMVrDEd6gJ2qViGYWsQNer9MGUOaK2FTkfrTrBHsdBaKMCkUcxBpqhgZd89J5BMIC8UDrKyhwEiKiDZwwBwRzxUQIO7ADwqINKbl1HJG9a163mKhQDMUhhDp5QU1AXDjdF7P/QikjaVSuEx3vBctwL95qfZEJA+7IF+47AUHtePVQ0rgExQZM0/wC/2reMhR5YQoAAAAABJRU5ErkJggg==",Xe=""+new URL("home-653daf67.jpg",import.meta.url).href,Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAvRJREFUaEPdWm1O4zAQjVuB9hKL9iecYuFkW07WcAr4ieASiBU1Gm9iHMcz8ya2i7T9BZXtvPfmM+O6odPn8dePW/fx8YeO98493Ly8H3o8yvU49PHq8uCGIYCfP34Y7nuQaEaAFCewQXXnwt/5h0iE73a78eb5bWwhXhWBAPp0unXe/+ZASyBbWGUTgejfjNJWZWuImAmU/NsKmFu/hQhMIKh+Oh1bgRVda7e7Q2MEItBT9VprqARM4L3/l1mELJSn19ogFwnA4L0f/X5/P5v96erSl4Bdv7yH59G5gWdWK7jUK9UPlgDk896P169/7/IHP/28OOZW4AIUEckLMcES4FREK+sCGEN0PgshMVsvF6tIQDtQUiR/AFkSySiaxTkLFglI6lvAW1OuSqLgSisCkvpbCo2ZRKER/OoI1zG3IsCpfw7wM9BSEoixl1lhQUBSnwsiq8LoelTIBQF0EwqiZh1rhSyjRQJSAJ3TfWJqFXqvNJF8ERCC59zuo8WCicB3qK8RGBI3ir2J1pdYiaQJwbpXykJ5J+C0qrsIRKUlkFoDlIQFD7mSQ9imJJBKrHWjUnbSerBcUDMBJKC3EtBaiRVx70dn2VTjBuhei0fQmXAQp5GPFKiaIEbiYBYk1gG08iHgW63hiKTW1CsxmHlagU7PQVobnQANZw1jjlZExLY+wbNs5grvsgHQN1gB7Yz/r3ZaTKlntAKqPjnH+o2McyPypE4z/jRurK+063diZQbaM6C1olrqArqOVdCRCllAA28aq9CBWlOluVNaGLW1SOU1DbYQRUJ2ZWKiCMgwhsxryabRYiAhzWiSp8x3X/MQVutGLTc8mvXajtcnq7Bvd8r4faU8kPVUAhZLtGojJPfMnwERQGOiFQFLqoYJSO+7zYADLrPZAvlGNMAhctkND7RnWmS2QDMiBNq5h9pb+2oC0bWmW/upwVr8TiKSnpSm/5FLD8QSzQhoDZmWzxGwpTVdCMTUS7+hoNqQ3GBuBcrt+wRFn1Z7JydFCwAAAABJRU5ErkJggg==";const bn={class:"map_view"},An={class:"map_view_title"},xn={style:{"font-weight":"bold"}},Cn=["src"],En={class:"map_view_title_notice"},kn={class:"map_view_title_notice_desc"},Ln={class:"map_view_title_notice_desc"},Bn={class:"map_view_title_notice_desc"},In=["src"],$n={class:"map_view_ad"},On=["href"],Sn=["src"],Pn={class:"map_view_ad"},Dn=["href"],Fn=["src"],zn={class:"map_view_center"},Rn=["href"],Un={key:0},Mn=["src"],Tn={__name:"mobile",setup(e){Ue();const t=x({lng:13.730562,lat:100.570478});x(3);const a=x(null),d=x(!1),p=Y({adListLeft:[],adListRight:[],mapList:[],points:[],notice1:"",notice2:"",notice3:"",infoCenter:{lng:"",lat:""}}),h=x(!1);Y({name:"",contact_information:"",comment:"",pic_url:""});const s=Y({name:"",contact_information:"",comment:"",display_pic_url:"",showModal:!1,position:{lng:"",lat:""}}),m=x(0);oe(()=>{Me().then(I=>{p.adListLeft=I.list.filter((g,O)=>O%2==1),p.adListRight=I.list.filter((g,O)=>O%2==0)}),Te().then(I=>{p.notice1=I.notice1,p.notice2=I.notice2,p.notice3=I.notice3}),k()});const i=({BMap:I,map:g})=>{new I.Geolocation().getCurrentPosition(function(L){console.log(L),t.value.lng=L.longitude,t.value.lat=L.latitude},{enableHighAccuracy:!0});const F=new I.NavigationControl;g.addControl(F)},C=({type:I,target:g,point:O,pixel:F,overlay:L})=>{p.infoCenter={lng:O.lng,lat:O.lat},console.log("state.infoCenter",p.infoCenter),h.value=!0},k=()=>{Ne().then(I=>{let g=I.list,O=[];g.forEach(F=>{F.icon=Ve,F.display_label_pic_url&&(F.icon=F.display_label_pic_url),O.push({lng:F.lng,lat:F.lat})}),p.mapList=g,p.points=O})},b=I=>{v(),m.value=I,s.showModal=!0},$=()=>{p.mapList.forEach((g,O)=>(O==m.value&&(s.name=g.name,s.contact_information=g.contact_information,s.comment=g.comment,s.pic_url=g.pic_url,s.address=g.address,s.display_pic_url=g.display_pic_url,s.position.lng=g.lng,s.position.lat=g.lat),g)),s.showModal=!0},v=()=>{s.name="",s.contact_information="",s.comment="",s.pic_url="",s.position.lng="",s.position.lat="",s.showModal=!1},l=()=>{ce().then(I=>{console.log(I),new I.LocalSearch(a.value.map,{renderOptions:{map:a.value.map}}).search("芭提雅旅游区")})},N=()=>{d.value=!0},M=I=>{const{lng:g,lat:O}=s.position;I=="baidu"&&(window.location.href=`http://api.map.baidu.com/marker?location=${g},${O}&title=${s.address}&content=${s.address}&output=html`),I=="gaode"&&(window.location.href=`http://uri.amap.com/marker?position=${g},${O}&name=${s.address}&coordinate=gaode&callnative=1`)},ee=()=>{d.value=!1};return(I,g)=>{const O=P("bm-marker"),F=P("bm-info-window"),L=P("bm-geolocation"),z=wn;return y(),B(U,null,[_("div",bn,[_("div",An,[_("p",xn,[_("img",{src:G(Xe),class:"map_view_logo"},null,8,Cn),S(" Thaixmap")]),_("div",En,[_("p",kn,"Notice: "+D(p.notice1),1),_("p",Ln,"Notice: "+D(p.notice2),1),_("p",Bn,"Notice: "+D(p.notice3),1)])]),_("img",{src:G(Ze),class:"map_view_home",onClick:g[0]||(g[0]=E=>l())},null,8,In),_("div",$n,[(y(!0),B(U,null,j(p.adListLeft,E=>(y(),B("a",{class:"map_view_ad_item",key:E.sort,target:"_blank",href:E.url},[_("img",{src:E.display_img,class:"map_view_ad_item_img"},null,8,Sn)],8,On))),128))]),_("div",Pn,[(y(!0),B(U,null,j(p.adListRight,E=>(y(),B("a",{class:"map_view_ad_item",key:E.sort,target:"_blank",href:E.url},[_("img",{src:E.display_img,class:"map_view_ad_item_img"},null,8,Fn)],8,Dn))),128))]),_("div",zn,[n(G(We),{class:"map_view_center_container map",id:"map",zoom:15,center:"芭提雅旅游区",onReady:i,onRightclick:C,ref_key:"map",ref:a},{default:u(()=>[(y(!0),B(U,null,j(p.mapList,(E,K)=>(y(),T(O,{position:{lng:E.lng,lat:E.lat},dragging:!1,onClick:le=>b(K),zIndex:999,icon:{url:E.icon,size:{width:32,height:32}}},null,8,["position","onClick","icon"]))),256)),n(O,{position:s.position,dragging:!1,onClick:g[4]||(g[4]=E=>$()),zIndex:999},{default:u(()=>[n(F,{title:"标注点",position:s.position,show:s.showModal,onClose:g[2]||(g[2]=E=>v()),onOpen:g[3]||(g[3]=E=>$()),zIndex:"99999"},{default:u(()=>[_("p",null,"地点名称："+D(s.name),1),_("p",{style:{color:"rgba(0,0,235,0.9)",cursor:"pointer"},onClick:g[1]||(g[1]=E=>N())},"地点："+D(s.address),1),_("p",null,"评论："+D(s.comment),1),_("p",null,[S("联系方式："),_("a",{href:"tel:"+s.contact_information},D(s.contact_information),9,Rn)]),s.display_pic_url?(y(),B("div",Un,[S(" 图片： "),(y(!0),B(U,null,j(s.display_pic_url,E=>(y(),B("img",{class:"img",src:E},null,8,Mn))),256))])):J("",!0)]),_:1},8,["position","show"])]),_:1},8,["position"]),n(L,{anchor:"BMAP_ANCHOR_BOTTOM_LEFT",showAddressBar:!0,autoLocation:!0})]),_:1},512)])]),n(z,{show:d.value,"onUpdate:show":g[8]||(g[8]=E=>d.value=E),position:"bottom",round:"",class:"popup_map"},{default:u(()=>[_("div",{class:"map_item",onClick:g[5]||(g[5]=E=>M("baidu"))},"百度地图"),_("div",{class:"map_item",onClick:g[6]||(g[6]=E=>M("gaode"))},"高德地图"),_("div",{class:"map_item",onClick:g[7]||(g[7]=E=>ee())},"取消")]),_:1},8,["show"])],64)}}};const Nn={class:"pc-title"},Wn={class:"pc-title-name"},Qn={class:"pc-title-name-logo"},jn=["src"],Gn=_("p",null,"Thaixmap",-1),Kn={class:"pc-title-name-value"},Yn={class:"pc-title_action"},qn={key:0,class:"pc-title_user"},Hn={class:"pc-map_view"},Jn={class:"pc-map_view_ad"},Vn=["href"],Xn=["src"],Zn={class:"pc-map_view_center"},eo={class:"pc-place_main"},to=_("span",{class:"pc-require"},"*",-1),no={key:0},oo=_("span",{class:"pc-require"},"*",-1),ao={key:0},lo={key:0},io={key:0,class:"pc-img_list"},so=["src"],ro={key:1,class:"clearfix"},uo=_("div",{style:{"margin-top":"8px"}},"上传",-1),co={style:{display:"flex","align-items":"center",gap:"10px"}},po=["src"],fo={class:"pc-place_main"},_o=_("span",{class:"pc-require"},"*",-1),mo=_("span",{class:"pc-require"},"*",-1),vo=_("div",{style:{"margin-top":"8px"}},"上传",-1),go={style:{display:"flex","align-items":"center",gap:"10px"}},yo=["src"],ho={class:"pc-map_view_ad"},wo=["href"],bo=["src"],Ao=["src"],xo={__name:"pc",setup(e){Ue();const t=x({lng:13.730562,lat:100.570478}),a=x("芭提雅旅游区"),d=x(15),p=x(""),h=x(""),s=x(!1),m=x(null),i=Y({adListLeft:[],adListRight:[],mapList:[],points:[],notice1:"",notice2:"",notice3:"",infoCenter:{lng:"",lat:""},fileList:[],labelList:[]}),C=x(!1),k=x(!1),b=x(!1),$=x(null),v=Y({name:"",contact_information:"",comment:"",pic_url:"",address:"",display_pic_url:"",address:"",label_id:null}),l=Y({id:null,name:"",contact_information:"",address:"",comment:"",display_pic_url:[],showModal:!1,position:{lng:"",lat:""},label_id:null,pic_url_display_kv:{}}),N=x(0);oe(()=>{localStorage.getItem("token")?s.value=!0:s.value=!1,Me().then(c=>{i.adListLeft=c.list.filter((o,f)=>f%2==1),i.adListRight=c.list.filter((o,f)=>f%2==0)}),Te().then(c=>{i.notice1=c.notice1,i.notice2=c.notice2,i.notice3=c.notice3}),M(),O()}),_e(()=>{setTimeout(()=>{$.value.observer.disconnect()},50)});const M=()=>{bt().then(c=>{i.labelList=c.list})},ee=()=>{localStorage.getItem("token")?(localStorage.removeItem("token"),s.value=!1):C.value=!0},I=({BMap:c,map:o})=>{new c.Geolocation().getCurrentPosition(function(w){t.value.lng=w.longitude,t.value.lat=w.latitude},{enableHighAccuracy:!0});const A=new c.NavigationControl;o.addControl(A),a.value="芭提雅旅游区"},g=({type:c,target:o,point:f,pixel:A,overlay:w})=>{window.localStorage.getItem("token")||(Q.error("请登录"),C.value=!0),i.infoCenter={lng:f.lng,lat:f.lat},k.value=!0},O=()=>{Ne().then(c=>{let o=c.list,f=[];o=o.map(A=>(A.icon=Ve,A.display_label_pic_url&&(A.icon=A.display_label_pic_url),f.push({lng:A.lng,lat:A.lat}),A)),i.mapList=o,i.points=f})},F=c=>{z(),N.value=c,l.showModal=!0},L=()=>{let c=i.mapList;i.fileList=[],c.forEach((f,A)=>(A==N.value&&(l.id=f.id,console.log("item",f),l.name=f.name,l.contact_information=f.contact_information,l.comment=f.comment,l.address=f.address,l.display_pic_url=f.display_pic_url,l.position.lng=f.lng,l.position.lat=f.lat,l.pic_url_display_kv=f.pic_url_display_kv),f)),Object.keys(l.pic_url_display_kv).forEach(f=>{i.fileList.push({uid:l.pic_url_display_kv[f],name:l.pic_url_display_kv[f],status:"done",url:l.pic_url_display_kv[f],path:f})}),l.showModal=!0},z=()=>{l.name="",l.contact_information="",l.comment="",l.address="",l.pic_url="",l.position.lng="",l.position.lat="",l.showModal=!1,i.fileList=[]},E=()=>{i.fileList=[],k.value=!0},K=()=>{k.value=!1,i.infoCenter={lng:"",lat:""},v.pic_url="",v.address="",v.display_pic_url="",v.name="",v.contact_information="",v.comment=""},le=c=>{let o=new FormData;o.append("file",c.file);let f=[];i.fileList&&(f=i.fileList),Ce(o).then(A=>{f.push({uid:c.file.uid,name:c.file.name,status:"done",url:A.display_path,path:A.path}),f=f.filter(w=>w.status!="uploading"),i.fileList=f})},et=c=>{let o=new FormData;o.append("file",c.file);let f=[];i.fileList&&(f=i.fileList),Ce(o).then(A=>{f.push({uid:c.file.uid,name:c.file.name,status:"done",url:A.display_path,path:A.path}),f=f.filter(w=>w.status!="uploading"),l.pic_url_display_kv[A.path]=A.display_path,i.fileList=f})},tt=()=>{if(!p.value)return Q.error("用户名不能为空"),!1;if(!h.value)return Q.error("密码不能为空"),!1;if(p.value!="admin"||h.value!="123456"){Q.error("请输入正确的账号密码");return}else window.localStorage.setItem("token",!0),C.value=!1,s.value=!0},nt=()=>{b.value=!0},ot=()=>{b.value=!1},at=()=>{let c=new FormData;if(!l.name){Q.warning("请输入名称");return}if(!l.address){Q.warning("请输入地址");return}let o=[];i.fileList&&(o=i.fileList);let f=[];o.forEach(A=>{A.path&&f.push(A.path)}),c.append("id",l.id),c.append("comment",l.comment),c.append("address",l.address),c.append("contact_information",l.contact_information),c.append("name",l.name),c.append("lng",l.position.lng),c.append("lat",l.position.lat),c.append("lat",l.position.lat),l.label_id&&c.append("label_id",l.label_id),f.length>0&&c.append("pic_url",f.join(",")),xt(c).then(A=>{Q.success(A.message),O(),l.name="",l.contact_information="",l.comment="",l.display_pic_url="",l.position.lng="",l.position.lat="",l.pic_url_display_kv={},v.pic_url="",b.value=!1,i.fileList=[],z()})},lt=()=>{let c=new FormData;if(!v.name){Q.warning("请输入名称");return}if(!v.address){Q.warning("请输入地址");return}let o=[];i.fileList&&(o=i.fileList);let f=[];o.forEach(A=>{A.path&&f.push(A.path)}),c.append("comment",v.comment),c.append("address",v.address),c.append("contact_information",v.contact_information),c.append("name",v.name),c.append("label_id",v.label_id),c.append("lng",i.infoCenter.lng),c.append("lat",i.infoCenter.lat),f.length>0&&c.append("pic_url",f.join(",")),Ct(c).then(A=>{Q.success(A.message),O(),v.name="",v.address="",v.contact_information="",v.comment="",i.infoCenter.lng="",i.infoCenter.lat="",v.pic_url="",k.value=!1,i.fileList=[],K()})},it=()=>{ce().then(c=>{console.log(c),new c.LocalSearch(m.value.map,{renderOptions:{map:m.value.map}}).search("芭提雅旅游区")})},st=()=>{ce().then(c=>{const{lng:o,lat:f}=l.position,A=c.Point(t.value.lng,t.value.lat),w=c.Point(o,f),W=c.DrivingRoute(m.value.map);W.search(A,w),console.log("driving",W)})};return ne(v,(c,o)=>{console.log("val",c)}),(c,o)=>{const f=P("a-button"),A=P("bm-marker"),w=P("a-col"),W=P("a-input"),R=P("a-row"),he=P("plus-outlined"),we=P("a-upload"),be=P("a-radio"),Ae=P("a-radio-group"),xe=P("bm-info-window"),rt=P("bm-geolocation"),ut=P("a-icon"),ct=P("svg-icon"),dt=P("a-input-password"),pt=P("a-modal");return y(),B(U,null,[_("div",Nn,[_("div",Wn,[_("div",Qn,[_("img",{src:G(Xe),class:"pc-title-name-logo-img"},null,8,jn),Gn]),_("div",Kn,[_("p",null,D(i.notice1),1),_("p",null,D(i.notice2),1),_("p",null,D(i.notice3),1)])]),_("div",Yn,[s.value?(y(),B("p",qn,"admin")):J("",!0),n(f,{class:"pc-title_btn",type:"primary",onClick:o[0]||(o[0]=r=>ee())},{default:u(()=>[S(D(s.value?"登出":"登录"),1)]),_:1})])]),_("div",Hn,[_("div",Jn,[(y(!0),B(U,null,j(i.adListLeft,r=>(y(),B("a",{class:"pc-map_view_ad_item",key:r.sort,target:"_blank",href:r.url},[_("img",{src:r.display_img,class:"pc-map_view_ad_item_img"},null,8,Xn)],8,Vn))),128))]),_("div",Zn,[n(G(We),{class:"pc-map_view_center_container map","scroll-wheel-zoom":!0,id:"map",zoom:d.value,center:a.value,onReady:I,onRightclick:g,ref_key:"map",ref:m},{default:u(()=>[(y(!0),B(U,null,j(i.mapList,(r,ft)=>(y(),T(A,{position:{lng:r.lng,lat:r.lat},dragging:!1,onClick:Co=>F(ft),zIndex:999,icon:{url:r.icon,size:{width:32,height:32}}},null,8,["position","onClick","icon"]))),256)),n(A,{position:l.position,dragging:!1,onClick:o[13]||(o[13]=r=>L()),zIndex:999},{default:u(()=>[n(xe,{title:"标注点",position:l.position,show:l.showModal,onClose:o[11]||(o[11]=r=>z()),onOpen:o[12]||(o[12]=r=>L()),zIndex:"99999",ref:$.value,width:400},{default:u(()=>[_("div",eo,[s.value&&!b.value?(y(),T(G(At),{key:0,class:"pc-place_main_icon",onClick:o[1]||(o[1]=r=>nt())})):J("",!0),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[to,S("名称：")]),_:1}),n(w,{span:18},{default:u(()=>[b.value?(y(),T(W,{key:1,value:l.name,"onUpdate:value":o[2]||(o[2]=r=>l.name=r),placeholder:"请输入名称"},null,8,["value"])):(y(),B("p",no,D(l.name),1))]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[oo,S("地址：")]),_:1}),n(w,{span:18},{default:u(()=>[b.value?(y(),T(W,{key:1,value:l.address,"onUpdate:value":o[4]||(o[4]=r=>l.address=r),placeholder:"请输入地址"},null,8,["value"])):(y(),B("p",{key:0,style:{color:"rgba(0,0,235,0.9)",cursor:"pointer"},onClick:o[3]||(o[3]=r=>st())},D(l.address),1))]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("评论：")]),_:1}),n(w,{span:18},{default:u(()=>[b.value?(y(),T(W,{key:1,type:"textarea",autosize:"",value:l.comment,"onUpdate:value":o[5]||(o[5]=r=>l.comment=r),placeholder:"请输入评论"},null,8,["value"])):(y(),B("p",ao,D(l.comment),1))]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("联系方式：")]),_:1}),n(w,{span:18},{default:u(()=>[b.value?(y(),T(W,{key:1,value:l.contact_information,"onUpdate:value":o[6]||(o[6]=r=>l.contact_information=r),placeholder:"请输入联系方式"},null,8,["value"])):(y(),B("p",lo,D(l.contact_information),1))]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"top",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("图片：")]),_:1}),n(w,{span:18},{default:u(()=>[b.value?(y(),B("div",ro,[n(we,{"list-type":"picture-card","file-list":i.fileList,"onUpdate:fileList":o[7]||(o[7]=r=>i.fileList=r),customRequest:et,name:"file",class:"pc-upload",multiple:"true"},{default:u(()=>[_("div",null,[n(he),uo])]),_:1},8,["file-list"])])):(y(),B("div",io,[(y(!0),B(U,null,j(l.display_pic_url,r=>(y(),B("img",{src:r},null,8,so))),256))]))]),_:1})]),_:1}),b.value?(y(),T(R,{key:1,style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("标注点图标：")]),_:1}),n(w,{span:18},{default:u(()=>[n(Ae,{value:l.label_id,"onUpdate:value":o[8]||(o[8]=r=>l.label_id=r)},{default:u(()=>[(y(!0),B(U,null,j(i.labelList,r=>(y(),T(be,{key:r.id,value:r.id,disabled:!b.value,style:{"margin-bottom":"10px"}},{default:u(()=>[_("div",co,[_("p",null,D(r.name),1),_("img",{src:r.display_img,class:"pc-icon"},null,8,po)])]),_:2},1032,["value","disabled"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})):J("",!0),b.value?(y(),T(R,{key:2,type:"flex",justify:"flex-start",align:"bottom"},{default:u(()=>[n(w,{span:6}),n(w,{span:18},{default:u(()=>[n(f,{type:"primary",onClick:o[9]||(o[9]=r=>at()),style:{"margin-right":"10px"}},{default:u(()=>[S("确定")]),_:1}),n(f,{onClick:o[10]||(o[10]=r=>ot())},{default:u(()=>[S("取消")]),_:1})]),_:1})]),_:1})):J("",!0)])]),_:1},8,["position","show"])]),_:1},8,["position"]),n(A,{position:i.infoCenter,dragging:!1,onClick:o[23]||(o[23]=r=>E()),zIndex:999},{default:u(()=>[n(xe,{show:k.value,onClose:o[21]||(o[21]=r=>K()),onOpen:o[22]||(o[22]=r=>E()),zIndex:"99999",ref:$.value,width:400},{default:u(()=>[_("div",fo,[n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[_o,S("名称：")]),_:1}),n(w,{span:18},{default:u(()=>[n(W,{value:v.name,"onUpdate:value":o[14]||(o[14]=r=>v.name=r),placeholder:"请输入名称"},null,8,["value"])]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[mo,S("地址：")]),_:1}),n(w,{span:18},{default:u(()=>[n(W,{value:v.address,"onUpdate:value":o[15]||(o[15]=r=>v.address=r),placeholder:"请输入地址"},null,8,["value"])]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("评论：")]),_:1}),n(w,{span:18},{default:u(()=>[n(W,{type:"textarea",autosize:"",value:v.comment,"onUpdate:value":o[16]||(o[16]=r=>v.comment=r),placeholder:"请输入评论"},null,8,["value"])]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("联系方式：")]),_:1}),n(w,{span:18},{default:u(()=>[n(W,{value:v.contact_information,"onUpdate:value":o[17]||(o[17]=r=>v.contact_information=r),placeholder:"请输入联系方式"},null,8,["value"])]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"top",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("图片：")]),_:1}),n(w,{span:18},{default:u(()=>[n(we,{"file-list":i.fileList,"onUpdate:fileList":o[18]||(o[18]=r=>i.fileList=r),"list-type":"picture-card",name:"file",customRequest:le,class:"pc-upload",multiple:"true"},{default:u(()=>[_("div",null,[n(he),vo])]),_:1},8,["file-list"])]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom",style:{"margin-bottom":"10px"}},{default:u(()=>[n(w,{span:6,style:{"text-align":"right"}},{default:u(()=>[S("标注点图标：")]),_:1}),n(w,{span:18},{default:u(()=>[n(Ae,{value:v.label_id,"onUpdate:value":o[19]||(o[19]=r=>v.label_id=r)},{default:u(()=>[(y(!0),B(U,null,j(i.labelList,r=>(y(),T(be,{key:r.id,value:r.id,style:{"margin-bottom":"10px"}},{default:u(()=>[_("div",go,[_("p",null,D(r.name),1),_("img",{src:r.display_img,class:"pc-icon"},null,8,yo)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),n(R,{type:"flex",justify:"flex-start",align:"bottom"},{default:u(()=>[n(w,{span:6}),n(w,{span:18},{default:u(()=>[n(f,{type:"primary",onClick:o[20]||(o[20]=r=>lt()),style:{"margin-right":"10px"}},{default:u(()=>[S("确定")]),_:1})]),_:1})]),_:1})])]),_:1},8,["show"])]),_:1},8,["position"]),n(rt,{anchor:"BMAP_ANCHOR_BOTTOM_RIGHT",showAddressBar:!0,autoLocation:!0})]),_:1},8,["zoom","center"])]),_("div",ho,[(y(!0),B(U,null,j(i.adListRight,r=>(y(),B("a",{class:"pc-map_view_ad_item",key:r.sort,target:"_blank",href:r.url},[_("img",{src:r.display_img,class:"pc-map_view_ad_item_img"},null,8,bo)],8,wo))),128))]),n(pt,{visible:C.value,"onUpdate:visible":o[26]||(o[26]=r=>C.value=r),title:"登陆",footer:null},{default:u(()=>[n(W,{value:p.value,"onUpdate:value":o[24]||(o[24]=r=>p.value=r),placeholder:"请输入账号",size:"large","allow-clear":"",style:{"margin-bottom":"20px"}},{default:u(()=>[n(ut,{slot:"prefix",type:"user"})]),_:1},8,["value"]),n(dt,{value:h.value,"onUpdate:value":o[25]||(o[25]=r=>h.value=r),placeholder:"请输入密码",size:"large","allow-clear":"",style:{"margin-bottom":"20px"}},{default:u(()=>[n(ct,{icon:"password",size:14,slot:"prefix"})]),_:1},8,["value"]),n(f,{type:"primary",block:"",size:"large",onClick:tt},{default:u(()=>[S(" 登录 ")]),_:1})]),_:1},8,["visible"]),_("img",{src:G(Ze),class:"pc-location",onClick:o[27]||(o[27]=r=>it())},null,8,Ao)])],64)}}},Lo={__name:"index",setup(e){const t=Y({target:""});return oe(()=>{/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)||document.body.clientWidth<750?t.target="mobile_plate":t.target="pc_plate",window.onresize=function(){/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)||document.body.clientWidth<750?t.target="mobile_plate":t.target="pc_plate"}}),(a,d)=>(y(),B(U,null,[t.target=="mobile_plate"?(y(),T(Tn,{key:0})):J("",!0),t.target=="pc_plate"?(y(),T(xo,{key:1})):J("",!0)],64))}};export{Lo as default};
